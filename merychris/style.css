:root {
  --desk-dark: #433327;
  --desk-mid: #6b4f39;
  --desk-light: #8f6f4d;
  --paper-base: #f0e5d5;
  --paper-shadow: #d8c6ac;
  --paper-edge: rgba(90, 63, 33, 0.28);
  --ink: #2d2016;
  --gold: #8d6b36;
  --wax-dark: #4a0f1b;
  --wax-mid: #7b1f31;
  --wax-light: #b44c5e;
  --panel-shadow: rgba(21, 11, 6, 0.42);
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
}

body {
  color: var(--ink);
  overflow: hidden;
  font-family: "Palatino Linotype", "Book Antiqua", Palatino, "Times New Roman", serif;
  background:
    radial-gradient(circle at 18% 9%, rgba(244, 222, 183, 0.23), transparent 30%),
    radial-gradient(circle at 82% 90%, rgba(54, 32, 18, 0.35), transparent 36%),
    linear-gradient(135deg, var(--desk-dark) 0%, var(--desk-mid) 46%, var(--desk-light) 100%);
}

.ambience {
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.58;
  mix-blend-mode: soft-light;
  background:
    repeating-linear-gradient(14deg, rgba(255, 255, 255, 0.14) 0 1px, transparent 1px 8px),
    repeating-linear-gradient(112deg, rgba(0, 0, 0, 0.12) 0 2px, transparent 2px 12px);
}

.stage {
  min-height: 100vh;
  width: min(96vw, 1100px);
  margin: 0 auto;
  display: grid;
  place-items: center;
  perspective: 1600px;
}

.envelope-shell {
  width: min(92vw, 760px);
  aspect-ratio: 1.56 / 1;
  display: grid;
  place-items: center;
}

.envelope {
  --tilt-x: 0deg;
  --tilt-y: 0deg;
  position: relative;
  width: 100%;
  height: 100%;
  border-radius: 18px;
  overflow: hidden;
  transform-style: preserve-3d;
  transform: rotateX(var(--tilt-x)) rotateY(var(--tilt-y));
  transition: transform 220ms ease;
  box-shadow:
    0 28px 42px rgba(23, 12, 7, 0.35),
    0 70px 100px rgba(8, 4, 2, 0.3);
  background:
    linear-gradient(168deg, rgba(255, 255, 255, 0.26), transparent 46%),
    linear-gradient(22deg, transparent 64%, rgba(90, 62, 33, 0.21)),
    var(--paper-base);
}

.envelope::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    repeating-linear-gradient(0deg, rgba(126, 87, 44, 0.04) 0 1px, transparent 1px 5px),
    radial-gradient(circle at 62% 15%, rgba(255, 255, 255, 0.3), transparent 28%);
}

.envelope::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  border: 1px solid var(--paper-edge);
  box-shadow:
    inset 0 1px 0 rgba(255, 247, 231, 0.7),
    inset 0 -14px 25px rgba(78, 56, 33, 0.16);
  pointer-events: none;
}

.letter {
  position: absolute;
  left: 7%;
  right: 7%;
  top: 8%;
  bottom: 8%;
  z-index: 1;
  border-radius: 10px;
  padding: clamp(1rem, 2vw, 1.9rem);
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.82), rgba(239, 226, 204, 0.9)),
    repeating-linear-gradient(0deg, rgba(140, 104, 54, 0.07) 0 1px, transparent 1px 4px),
    #f7efdf;
  box-shadow:
    0 10px 18px rgba(57, 37, 18, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.85);
  transform: translateY(112%);
  opacity: 0;
  filter: blur(1.5px);
  transition:
    transform 1350ms cubic-bezier(0.15, 0.92, 0.2, 1) 420ms,
    opacity 420ms ease 420ms,
    filter 500ms ease 420ms;
}

.letter-content {
  text-align: center;
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 500ms ease 900ms, transform 520ms ease 900ms;
}

.eyebrow {
  margin: 0;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  font-size: clamp(0.72rem, 1.35vw, 1rem);
  font-weight: 700;
  color: #5f4732;
}

h1 {
  margin: 0.52rem 0 0.4rem;
  font-size: clamp(2.1rem, 4.6vw, 4.2rem);
  font-weight: 400;
  line-height: 1;
}

.date {
  margin: 0.45rem 0 0.25rem;
  font-size: clamp(1.03rem, 2vw, 1.42rem);
  letter-spacing: 0.04em;
}

.location {
  margin: 0.12rem 0;
  font-size: clamp(1rem, 1.9vw, 1.26rem);
}

.hint {
  margin: 0.85rem 0 0;
  text-transform: uppercase;
  letter-spacing: 0.11em;
  color: var(--gold);
  font-size: clamp(0.76rem, 1.35vw, 0.95rem);
}

.pocket {
  position: absolute;
  inset: auto 0 0;
  height: 73%;
  z-index: 3;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.24), transparent 42%),
    linear-gradient(12deg, transparent 60%, rgba(126, 87, 44, 0.26)),
    linear-gradient(180deg, var(--paper-base), var(--paper-shadow));
  border-top: 1px solid rgba(82, 58, 32, 0.22);
  box-shadow:
    inset 0 8px 14px rgba(255, 245, 228, 0.33),
    inset 0 -10px 24px rgba(90, 61, 33, 0.17);
}

.pocket-top-cover {
  position: absolute;
  inset: 0;
  z-index: 4;
  pointer-events: none;
  background:
    linear-gradient(180deg, rgba(245, 234, 216, 0.92), rgba(236, 219, 195, 0.9));
  clip-path: polygon(0 0, 100% 0, 50% 58.5%);
  opacity: 1;
  transition: opacity 220ms ease;
}

.pocket::before,
.pocket::after {
  content: "";
  position: absolute;
  top: -2px;
  width: 50%;
  height: 76%;
  border-top: 1px solid rgba(92, 64, 34, 0.24);
  pointer-events: none;
}

.pocket::before {
  left: 0;
  clip-path: polygon(0 0, 100% 0, 0 100%);
  background: linear-gradient(137deg, rgba(255, 250, 239, 0.15), rgba(113, 80, 46, 0.08));
}

.pocket::after {
  right: 0;
  clip-path: polygon(0 0, 100% 0, 100% 100%);
  background: linear-gradient(220deg, rgba(255, 250, 239, 0.15), rgba(113, 80, 46, 0.08));
}

.flap {
  position: absolute;
  inset: 0;
  z-index: 5;
  transform-origin: 50% 0%;
  clip-path: polygon(0 0, 100% 0, 50% 58.5%);
  background:
    linear-gradient(161deg, rgba(255, 255, 255, 0.4), transparent 45%),
    linear-gradient(17deg, transparent 72%, rgba(110, 77, 42, 0.3)),
    linear-gradient(180deg, #f3e8d6, #deccb3);
  border-bottom: 1px solid rgba(72, 48, 24, 0.25);
  box-shadow: 0 12px 18px var(--panel-shadow);
  transition: transform 1050ms cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 700ms ease;
}

.flap::after {
  content: "";
  position: absolute;
  inset: 8% 10% auto;
  height: 36%;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.26), transparent);
  clip-path: polygon(0 0, 100% 0, 50% 100%);
  pointer-events: none;
}

.seal {
  position: absolute;
  left: 50%;
  top: 34.3%;
  z-index: 6;
  width: clamp(72px, 10vw, 95px);
  aspect-ratio: 1;
  transform: translate(-50%, -50%);
  border: 0;
  border-radius: 999px;
  cursor: pointer;
  color: #f2d5d9;
  background:
    radial-gradient(circle at 25% 22%, rgba(246, 171, 183, 0.7), transparent 34%),
    radial-gradient(circle at 72% 78%, rgba(36, 2, 10, 0.66), transparent 44%),
    conic-gradient(
      from 12deg,
      #8d2437 0deg 52deg,
      #5a1221 52deg 110deg,
      #a7374b 110deg 180deg,
      #5d1222 180deg 246deg,
      #842134 246deg 320deg,
      #5a1320 320deg 360deg
    );
  box-shadow:
    inset 0 4px 8px rgba(255, 204, 212, 0.25),
    inset 0 -11px 15px rgba(24, 4, 8, 0.55),
    0 12px 15px rgba(30, 6, 12, 0.35),
    0 0 0 1px rgba(54, 8, 17, 0.35);
  transition: transform 250ms ease, opacity 300ms ease, filter 350ms ease;
}

.seal::before {
  content: "";
  position: absolute;
  inset: 12%;
  border-radius: inherit;
  border: 2px solid rgba(245, 203, 210, 0.4);
  box-shadow:
    inset 0 2px 4px rgba(255, 221, 225, 0.22),
    inset 0 -3px 4px rgba(30, 5, 10, 0.45);
}

.seal::after {
  content: "";
  position: absolute;
  inset: 23%;
  border-radius: 999px;
  background:
    radial-gradient(circle at 40% 35%, rgba(255, 229, 233, 0.18), transparent 55%),
    linear-gradient(150deg, rgba(65, 10, 20, 0.6), rgba(165, 61, 80, 0.3));
  box-shadow:
    inset 0 3px 4px rgba(26, 3, 8, 0.5),
    inset 0 -2px 2px rgba(255, 207, 216, 0.16);
}

.seal:hover {
  transform: translate(-50%, -50%) scale(1.05);
}

.seal:focus-visible {
  outline: 3px solid rgba(248, 211, 218, 0.64);
  outline-offset: 2px;
}

.seal-inner {
  font-size: clamp(1.1rem, 2vw, 1.5rem);
  font-weight: 700;
  letter-spacing: 0.04em;
  text-shadow:
    0 -1px 0 rgba(255, 206, 214, 0.2),
    0 2px 2px rgba(22, 2, 6, 0.62);
  mix-blend-mode: screen;
}

.envelope.open .seal {
  pointer-events: none;
  opacity: 0;
  transform: translate(-50%, -30%) rotate(-16deg) scale(0.5);
  filter: blur(1px);
}

.envelope.open .flap {
  transform: rotateX(-178deg);
  box-shadow: 0 28px 34px rgba(38, 23, 10, 0.25);
}

.envelope.open .letter {
  transform: translateY(16%);
  opacity: 1;
  filter: blur(0);
}

.envelope.open .letter-content {
  opacity: 1;
  transform: translateY(0);
}

.envelope.open .pocket-top-cover {
  opacity: 0;
}

@media (max-width: 760px) {
  .envelope-shell {
    width: min(94vw, 620px);
  }

  .pocket {
    height: 75%;
  }
}

@media (prefers-reduced-motion: reduce) {
  .envelope,
  .letter,
  .letter-content,
  .flap,
  .seal {
    transition: none;
  }
}
