:root {
  --bg-1: #f6f1e8;
  --bg-2: #ded4c5;
  --env-paper: #f3ece1;
  --env-edge: #d8cbb9;
  --ink: #2a1f16;
  --gold: #8b6a37;
  --wax-1: #861f2f;
  --wax-2: #611423;
  --wax-highlight: #b13b4e;
  --shadow: rgba(36, 19, 11, 0.25);
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
}

body {
  display: grid;
  place-items: center;
  color: var(--ink);
  font-family: "Cormorant Garamond", serif;
  background:
    radial-gradient(circle at 15% 20%, rgba(255, 255, 255, 0.55), transparent 35%),
    radial-gradient(circle at 85% 80%, rgba(124, 102, 72, 0.26), transparent 42%),
    linear-gradient(145deg, var(--bg-1), var(--bg-2));
  overflow: hidden;
}

.bg-texture {
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.28;
  mix-blend-mode: multiply;
  background-image:
    repeating-linear-gradient(
      40deg,
      transparent 0 3px,
      rgba(113, 87, 56, 0.1) 3px 4px
    ),
    radial-gradient(circle at 30% 10%, rgba(89, 63, 30, 0.12), transparent 25%),
    radial-gradient(circle at 70% 90%, rgba(89, 63, 30, 0.11), transparent 28%);
}

.stage {
  width: min(96vw, 980px);
  perspective: 1400px;
}

.envelope-shell {
  display: grid;
  place-items: center;
  min-height: 92vh;
}

.envelope {
  --tilt-x: 0deg;
  --tilt-y: 0deg;
  position: relative;
  width: min(88vw, 700px);
  aspect-ratio: 1.55 / 1;
  border-radius: 18px;
  transform-style: preserve-3d;
  transform: rotateX(var(--tilt-x)) rotateY(var(--tilt-y));
  transition: transform 250ms ease, filter 350ms ease;
  filter: drop-shadow(0 40px 30px rgba(34, 18, 10, 0.22));
}

.envelope::before,
.envelope::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
}

.envelope::before {
  background:
    linear-gradient(165deg, rgba(255, 255, 255, 0.5), transparent 45%),
    linear-gradient(12deg, transparent 65%, rgba(119, 87, 49, 0.2));
  z-index: 1;
}

.envelope::after {
  border: 1px solid rgba(95, 67, 37, 0.25);
  box-shadow:
    inset 0 0 0 2px rgba(255, 250, 242, 0.25),
    inset 0 -12px 30px rgba(83, 59, 30, 0.15);
}

.letter-shadow {
  position: absolute;
  inset: 7% 8% auto;
  height: 74%;
  border-radius: 12px;
  background: rgba(49, 31, 16, 0.16);
  transform: translateY(8px);
  filter: blur(8px);
  z-index: 0;
  transition: transform 700ms ease, opacity 600ms ease;
}

.letter {
  position: absolute;
  inset: 8% 8% auto;
  min-height: 74%;
  border-radius: 10px;
  padding: clamp(1rem, 2.6vw, 2rem);
  text-align: center;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.5), rgba(241, 230, 213, 0.78)),
    repeating-linear-gradient(
      0deg,
      rgba(139, 106, 55, 0.05) 0px 1px,
      transparent 1px 5px
    ),
    #f6efe4;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.9),
    0 8px 20px rgba(62, 43, 24, 0.16);
  transform: translateY(22%) translateZ(0);
  transition: transform 850ms cubic-bezier(0.2, 0.8, 0.2, 1);
  z-index: 1;
}

.eyebrow {
  margin: 0;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  font: 600 clamp(0.72rem, 1.6vw, 1rem) / 1.2 "Cinzel", serif;
  color: #5f4733;
}

h1 {
  margin: 0.65rem 0 0.4rem;
  font: 600 clamp(2rem, 5vw, 4rem) / 1.04 "Cormorant Garamond", serif;
}

.date {
  margin: 0.3rem 0;
  font: 500 clamp(1rem, 2.4vw, 1.45rem) / 1.2 "Cinzel", serif;
}

.location,
.hint {
  margin: 0.2rem 0;
  font-size: clamp(1rem, 2vw, 1.35rem);
}

.hint {
  margin-top: 0.7rem;
  letter-spacing: 0.09em;
  text-transform: uppercase;
  font-size: clamp(0.8rem, 1.5vw, 0.95rem);
  color: var(--gold);
}

.flap {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  transform-origin: 50% 0%;
  z-index: 4;
  background:
    linear-gradient(160deg, rgba(255, 255, 255, 0.4), transparent 50%),
    linear-gradient(12deg, transparent 72%, rgba(130, 95, 52, 0.24)),
    var(--env-paper);
  border: 1px solid rgba(97, 65, 34, 0.24);
  clip-path: polygon(0 0, 100% 0, 50% 58%);
  transition: transform 900ms cubic-bezier(0.3, 0.6, 0.2, 1),
    box-shadow 700ms ease;
  box-shadow: 0 12px 26px var(--shadow);
}

.seal {
  position: absolute;
  left: 50%;
  top: 33%;
  width: clamp(70px, 10vw, 92px);
  aspect-ratio: 1;
  transform: translate(-50%, -50%) rotate(0deg);
  border: none;
  border-radius: 999px;
  cursor: pointer;
  z-index: 6;
  background:
    radial-gradient(circle at 30% 25%, var(--wax-highlight), transparent 50%),
    radial-gradient(circle at 70% 75%, rgba(40, 5, 13, 0.44), transparent 52%),
    linear-gradient(145deg, var(--wax-1), var(--wax-2));
  box-shadow:
    inset 0 4px 10px rgba(255, 197, 197, 0.2),
    inset 0 -8px 14px rgba(26, 3, 8, 0.42),
    0 10px 16px rgba(23, 6, 11, 0.35);
  transition: transform 280ms ease, opacity 420ms ease, filter 400ms ease;
}

.seal::before {
  content: "";
  position: absolute;
  inset: 10%;
  border-radius: inherit;
  border: 2px solid rgba(255, 220, 220, 0.28);
}

.seal:hover {
  transform: translate(-50%, -50%) rotate(-5deg) scale(1.04);
}

.seal:focus-visible {
  outline: 3px solid rgba(148, 17, 43, 0.55);
  outline-offset: 3px;
}

.seal-inner {
  font: 600 clamp(1.2rem, 2.2vw, 1.6rem) / 1 "Cinzel", serif;
  color: #f3d5d8;
  text-shadow: 0 1px 0 rgba(55, 4, 11, 0.55);
}

.envelope.open .seal {
  pointer-events: none;
  transform: translate(-50%, -58%) rotate(-18deg) scale(0.55);
  opacity: 0;
  filter: blur(2px);
}

.envelope.open .flap {
  transform: rotateX(-176deg);
  box-shadow: 0 26px 34px rgba(45, 29, 13, 0.22);
}

.envelope.open .letter {
  transform: translateY(-27%) translateZ(16px);
}

.envelope.open .letter-shadow {
  transform: translateY(-5px);
  opacity: 0.45;
}

@media (max-width: 720px) {
  .envelope {
    width: min(92vw, 560px);
  }

  .seal {
    top: 35%;
  }
}

@media (prefers-reduced-motion: reduce) {
  .envelope,
  .flap,
  .seal,
  .letter,
  .letter-shadow {
    transition: none;
  }
}
