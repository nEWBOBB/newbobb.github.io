:root {
  --bg-1: #ece6dd;
  --bg-2: #d6c8b3;
  --paper-1: #f8f3ea;
  --paper-2: #e7dac7;
  --paper-edge: rgba(120, 92, 58, 0.34);
  --ink: #2c2218;
  --gold-1: #f3dc9a;
  --gold-2: #d3a455;
  --gold-3: #875b26;
  --shadow-soft: rgba(47, 30, 16, 0.16);
  --shadow-strong: rgba(26, 15, 8, 0.3);
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
}

body {
  overflow: hidden;
  font-family: "Cormorant Garamond", "Times New Roman", serif;
  color: var(--ink);
  background:
    radial-gradient(circle at 16% 12%, rgba(255, 255, 255, 0.64), transparent 34%),
    radial-gradient(circle at 82% 88%, rgba(150, 112, 70, 0.16), transparent 38%),
    linear-gradient(145deg, var(--bg-1), var(--bg-2));
}

.ambience {
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.28;
  mix-blend-mode: multiply;
  background:
    repeating-linear-gradient(15deg, rgba(93, 70, 45, 0.05) 0 1px, transparent 1px 8px),
    repeating-linear-gradient(104deg, rgba(255, 255, 255, 0.09) 0 1px, transparent 1px 11px);
}

.stage {
  min-height: 100vh;
  display: grid;
  place-items: center;
  perspective: 1700px;
  padding: 20px;
}

.envelope-shell {
  width: min(90vw, 430px);
  aspect-ratio: 0.64;
  display: grid;
  place-items: center;
}

.envelope {
  --tilt-x: 0deg;
  --tilt-y: 0deg;
  position: relative;
  width: 100%;
  height: 100%;
  border-radius: 26px;
  overflow: hidden;
  transform-style: preserve-3d;
  transform: rotateX(var(--tilt-x)) rotateY(var(--tilt-y));
  transition: transform 260ms ease;
  box-shadow:
    0 26px 40px var(--shadow-soft),
    0 70px 110px rgba(17, 10, 5, 0.21);
}

.paper-base {
  position: absolute;
  inset: 0;
  z-index: 1;
  background:
    radial-gradient(circle at 20% 16%, rgba(255, 255, 255, 0.62), transparent 40%),
    linear-gradient(164deg, var(--paper-1), var(--paper-2));
}

.paper-base::before {
  content: "";
  position: absolute;
  inset: 0;
  opacity: 0.6;
  background:
    repeating-linear-gradient(0deg, rgba(130, 95, 54, 0.04) 0 1px, transparent 1px 4px),
    radial-gradient(circle at 70% 78%, rgba(164, 130, 86, 0.08), transparent 30%);
}

.paper-base::after {
  content: "";
  position: absolute;
  inset: 0;
  border: 1px solid var(--paper-edge);
  border-radius: inherit;
  box-shadow:
    inset 0 1px 0 rgba(255, 251, 242, 0.72),
    inset 0 -12px 24px rgba(119, 89, 58, 0.11);
}

.letter {
  position: absolute;
  inset: 6.5%;
  z-index: 2;
  border-radius: 12px;
  padding: clamp(1rem, 2.4vw, 1.7rem);
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.91), rgba(245, 236, 221, 0.96)),
    repeating-linear-gradient(0deg, rgba(131, 96, 54, 0.06) 0 1px, transparent 1px 4px),
    #f8f1e2;
  box-shadow:
    0 12px 18px rgba(67, 46, 25, 0.13),
    inset 0 1px 0 rgba(255, 255, 255, 0.92);
  transform: translateY(122%);
  opacity: 0;
  transition:
    transform 1200ms cubic-bezier(0.2, 0.86, 0.2, 1),
    opacity 350ms ease;
}

.letter-content {
  text-align: center;
  opacity: 0;
  transform: translateY(7px);
  transition: opacity 520ms ease, transform 520ms ease;
}

.eyebrow {
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  font-size: clamp(0.68rem, 1.2vw, 0.9rem);
  color: #685036;
}

h1 {
  margin: 0.54rem 0 0.28rem;
  font-size: clamp(2.2rem, 7.4vw, 3.45rem);
  line-height: 1;
  font-weight: 500;
}

.date {
  margin: 0.34rem 0 0.14rem;
  letter-spacing: 0.03em;
  font-size: clamp(0.97rem, 2.85vw, 1.24rem);
}

.location {
  margin: 0.04rem 0;
  font-size: clamp(0.95rem, 2.55vw, 1.14rem);
}

.hint {
  margin: 0.78rem 0 0;
  letter-spacing: 0.11em;
  text-transform: uppercase;
  color: #8a642f;
  font-size: clamp(0.72rem, 1.9vw, 0.9rem);
}

.flap {
  position: absolute;
  z-index: 4;
  backface-visibility: hidden;
  transition: transform 980ms cubic-bezier(0.21, 0.8, 0.2, 1), opacity 500ms ease;
}

.flap-left {
  inset: 0 auto 0 0;
  width: 71%;
  clip-path: polygon(0 0, 100% 50%, 0 100%);
  transform-origin: 0% 50%;
  background:
    linear-gradient(145deg, rgba(255, 255, 255, 0.36), transparent 40%),
    linear-gradient(120deg, #f2e7d5, #e1d0b8 67%, #d4bea1);
  border-right: 1px solid rgba(119, 89, 56, 0.27);
  box-shadow: 10px 0 14px rgba(34, 22, 12, 0.08);
}

.flap-right {
  inset: 0 0 0 auto;
  width: 71%;
  clip-path: polygon(100% 0, 100% 100%, 0 50%);
  transform-origin: 100% 50%;
  background:
    linear-gradient(214deg, rgba(255, 255, 255, 0.34), transparent 41%),
    linear-gradient(235deg, #f1e5d3, #deccb4 66%, #d2bc9e);
  border-left: 1px solid rgba(119, 89, 56, 0.27);
  box-shadow: -10px 0 14px rgba(34, 22, 12, 0.08);
}

.flap-bottom {
  left: 0;
  right: 0;
  bottom: 0;
  height: 46%;
  clip-path: polygon(0 100%, 50% 0, 100% 100%);
  transform-origin: 50% 100%;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.24), transparent 44%),
    linear-gradient(11deg, #e8dac5, #d6bfa1);
  border-top: 1px solid rgba(109, 79, 46, 0.23);
  box-shadow: 0 -8px 15px rgba(33, 20, 11, 0.13);
}

.seal {
  position: absolute;
  left: 50%;
  top: 50%;
  z-index: 6;
  width: clamp(84px, 21vw, 108px);
  aspect-ratio: 1;
  transform: translate(-50%, -50%);
  border: 0;
  border-radius: 48% 52% 50% 50% / 46% 44% 56% 54%;
  cursor: pointer;
  color: rgba(99, 67, 30, 0.86);
  background:
    radial-gradient(circle at 22% 20%, rgba(255, 235, 176, 0.9), transparent 34%),
    radial-gradient(circle at 78% 78%, rgba(98, 65, 21, 0.72), transparent 46%),
    conic-gradient(
      from 10deg,
      var(--gold-1) 0deg 40deg,
      #c89343 40deg 90deg,
      #f2d58d 90deg 160deg,
      #b67d32 160deg 230deg,
      #ecc677 230deg 304deg,
      #a56e2d 304deg 360deg
    );
  box-shadow:
    inset 0 4px 8px rgba(255, 240, 195, 0.58),
    inset 0 -11px 14px rgba(110, 73, 27, 0.45),
    0 12px 16px rgba(88, 57, 23, 0.33),
    0 0 0 1px rgba(126, 86, 37, 0.56);
  transition: transform 230ms ease, opacity 300ms ease, filter 320ms ease;
}

.seal::before {
  content: "";
  position: absolute;
  inset: 10%;
  border-radius: inherit;
  border: 2px solid rgba(123, 84, 35, 0.56);
  box-shadow:
    inset 0 1px 2px rgba(255, 236, 182, 0.4),
    inset 0 -2px 3px rgba(106, 70, 24, 0.44);
}

.seal::after {
  content: "";
  position: absolute;
  inset: 23%;
  border-radius: inherit;
  background:
    radial-gradient(circle at 35% 26%, rgba(255, 239, 180, 0.3), transparent 45%),
    linear-gradient(155deg, rgba(116, 77, 28, 0.55), rgba(238, 197, 122, 0.28));
  box-shadow:
    inset 0 4px 4px rgba(111, 74, 27, 0.46),
    inset 0 -2px 3px rgba(255, 238, 187, 0.2);
}

.seal:hover {
  transform: translate(-50%, -50%) scale(1.045);
}

.seal:focus-visible {
  outline: 3px solid rgba(204, 157, 72, 0.64);
  outline-offset: 2px;
}

.seal-inner {
  position: relative;
  z-index: 2;
  font-size: clamp(1.02rem, 4.1vw, 1.5rem);
  font-weight: 700;
  letter-spacing: 0.03em;
  text-shadow:
    0 1px 0 rgba(255, 230, 165, 0.34),
    0 -1px 1px rgba(93, 60, 24, 0.5);
}

.envelope.is-unsealing .seal {
  pointer-events: none;
  transform: translate(-50%, -50%) scale(1.08);
  filter: saturate(1.1) brightness(1.03);
}

.envelope.is-opening .seal,
.envelope.is-revealed .seal {
  opacity: 0;
  transform: translate(-50%, -40%) rotate(-16deg) scale(0.5);
  filter: blur(1.5px);
}

.envelope.is-opening .flap-left,
.envelope.is-revealed .flap-left {
  transform: rotateY(-172deg);
}

.envelope.is-opening .flap-right,
.envelope.is-revealed .flap-right {
  transform: rotateY(172deg);
}

.envelope.is-opening .flap-bottom,
.envelope.is-revealed .flap-bottom {
  transform: rotateX(170deg);
  opacity: 0.84;
}

.envelope.is-revealed .letter {
  transform: translateY(-2%);
  opacity: 1;
}

.envelope.is-revealed .letter-content {
  opacity: 1;
  transform: translateY(0);
}

@media (max-width: 480px) {
  .envelope-shell {
    width: min(92vw, 405px);
  }
}

@media (prefers-reduced-motion: reduce) {
  .envelope,
  .flap,
  .seal,
  .letter,
  .letter-content {
    transition: none;
  }
}
